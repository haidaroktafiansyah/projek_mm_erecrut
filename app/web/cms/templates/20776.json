{"content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  let { alamat, e } = req?.body;\n  console.log(alamat);\n  let res = \"Failure\";\n\n  if (e === \"ReadAllData\") {\n    const readAlamat = await db.alamat_Departemen.findMany({\n      orderBy: {\n        id: \"asc\",\n      },\n      include: {\n        Kota: true,\n        Provinsi: true,\n      },\n    });\n    alamat = readAlamat;\n    // console.log(barang);\n    res = \"Read barang Success\";\n  }\n  if (e === \"ReadById\") {\n    const readAlamat = await db.alamat_Departemen.findFirst({\n      where: {\n        id: alamat.id,\n      },\n    });\n    alamat = readAlamat;\n    // console.log(user.barang.name);\n    res = alamat ? \"Read barang Success\" : \"barang not found\";\n  }\n  if (e === \"Delete\") {\n    try {\n      alamat = await db.alamat_Departemen.delete({\n        where: {\n          id: alamat.id,\n        },\n      });\n      res = \"Delete Success\";\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  if (e === \"Searching\") {\n    const key = \"%\" + alamat.alamat + \"%\";\n    const readalamat = await db.alamat_Departemen.findMany({\n      where: {\n        alamat: {\n          contains: key,\n          mode: \"insensitive\",\n        },\n      },\n      include: {\n        Kota: true,\n        Provinsi: true,\n      },\n    });\n    alamat = readalamat;\n    // console.log(authors);\n    res = \"Read nama_barang Success\";\n  }\n  reply.send({\n    res: res,\n    alamat,\n    e,\n  })\n}","figma":{}},"title":"alamat-test","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"45908","slug":"/api/alamat-test","site":"*","id":"20776"}